{{/* layouts/partials/head-meta.html */}}

{{ $title       := .Title | default .Site.Title }}
{{ $description := cond (isset .Params "description") .Params.description .Site.Params.description }}
{{ $image       := cond (isset .Params "image") (index .Params.image 0) .Site.Params.defaultImage }}

{{/* pinterest */}}
<meta name="p:domain_verify" content="7fb529081daa77710edda75452fcc1e7"/>

<!-- OpenGraph -->
<meta property="og:type"        content="{{ if .IsHome }}website{{ else if eq .Section "recipes" }}article{{ else }}website{{ end }}">
<meta property="og:title"       content="{{ $title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:url"         content="{{ .Permalink }}">
{{/* Image OG gérée dans baseof.html pour les recettes */}}
{{ if ne .Section "recipes" }}
  <meta property="og:image"     content="{{ $image | absURL }}">
{{ end }}
<meta property="og:site_name"   content="{{ .Site.Title }}">

{{ with .Params.tags }}
  {{ range . }}
    <meta property="article:tag" content="{{ . }}">
  {{ end }}
{{ end }}

{{ with .Params.categories }}
  {{ range . }}
    <meta property="article:section" content="{{ . }}">
  {{ end }}
{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card"        content="summary_large_image">
<meta name="twitter:title"       content="{{ $title }}">
<meta name="twitter:description" content="{{ $description }}">
{{ if ne .Section "recipes" }}
  <meta name="twitter:image"     content="{{ $image | absURL }}">
{{ end }}
<meta name="twitter:site"        content="@{{ .Site.Params.twitter }}">
<meta name="twitter:creator"     content="@{{ with .Params.authorTwitter }}{{ . }}{{ else }}{{ .Site.Params.twitter }}{{ end }}">

<!-- Sécurité -->
<meta name="referrer" content="strict-origin-when-cross-origin">

<!-- JSON-LD for Recipe -->
{{ if eq .Section "recipes" }}
  {{ partial "recipe-jsonld.html" . }}
{{ end }}

<!-- Google Analytics -->
{{ if .Site.Params.analytics.ga4 }}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ .Site.Params.analytics.ga4 }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ .Site.Params.analytics.ga4 }}');
</script>
{{ end }}

<!-- Clarity -->
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "uw42ganfba");
</script>
